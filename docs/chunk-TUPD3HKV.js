import{b as L,d as U,g as Y,k as q,l as G,m as K,o as J}from"./chunk-MSX6URJP.js";import{k as V,l as W,o as z,q as N,x as B}from"./chunk-J7AGGE4S.js";import{$ as I,$a as M,Aa as s,Ba as D,Pa as y,Q as k,Ra as l,Ta as _,V as E,Va as i,Wa as o,Xa as C,Ya as O,ab as v,cb as a,d,db as g,eb as T,gb as P,hb as j,ia as h,ib as w,ja as b,k as S,kb as H,lb as F,mb as $,wa as A}from"./chunk-FOL3V5PG.js";var Q=(()=>{class t{constructor(e){this.http=e,this.baseUrl="http://localhost:8000/api/tutor",this.conversationHistory=[],this.conversationSubject=new S([]),this.isTypingSubject=new S(!1),this.connectionStatusSubject=new S("online"),this.conversation$=this.conversationSubject.asObservable(),this.isTyping$=this.isTypingSubject.asObservable(),this.connectionStatus$=this.connectionStatusSubject.asObservable(),this.addWelcomeMessage()}addWelcomeMessage(){let e={role:"assistant",content:`Hello! I'm your LearnMate AI Tutor! \u{1F393} 

I'm here to help you with your studies. I can assist you with:
\u2022 Mathematics (algebra, calculus, geometry, statistics)
\u2022 Science (physics, chemistry, biology)
\u2022 Computer Science (programming, algorithms)
\u2022 English (grammar, literature, writing)
\u2022 And much more!

What would you like to learn about today?`,timestamp:new Date};this.conversationHistory=[e],this.conversationSubject.next([...this.conversationHistory])}sendMessage(e,r,n="intermediate"){return d(this,null,function*(){try{let c={role:"user",content:e,timestamp:new Date};this.conversationHistory.push(c),this.conversationSubject.next([...this.conversationHistory]),this.isTypingSubject.next(!0);let m=this.conversationHistory.slice(-10).filter(f=>f.role==="user"||f.role==="assistant").map(f=>({role:f.role,content:f.content})),u={message:e,conversation_history:m,subject:r,user_level:n},x=yield this.http.post(`${this.baseUrl}/chat`,u).toPromise();if(x){this.connectionStatusSubject.next("online");let f={role:"assistant",content:x.response,timestamp:new Date(x.timestamp)};return this.conversationHistory.push(f),this.conversationSubject.next([...this.conversationHistory]),x}throw new Error("No response received")}catch(c){console.error("Error sending message to AI tutor:",c),this.connectionStatusSubject.next("offline");let m={role:"assistant",content:"\u26A0\uFE0F I'm having trouble connecting to my backend services right now. Please make sure the LearnMate AI backend server is running on localhost:8000. You can start it by running the Python backend from the backend folder. Let me know if you need help! \uFFFD",timestamp:new Date};throw this.conversationHistory.push(m),this.conversationSubject.next([...this.conversationHistory]),c}finally{this.isTypingSubject.next(!1)}})}getAvailableSubjects(){return d(this,null,function*(){try{return(yield this.http.get(`${this.baseUrl}/subjects`).toPromise())||{subjects:{}}}catch(e){return console.error("Error fetching subjects:",e),this.connectionStatusSubject.next("offline"),{subjects:this.getFallbackSubjects()}}})}getStudyTips(){return d(this,null,function*(){try{return(yield this.http.get(`${this.baseUrl}/study-tips`).toPromise())||{tips:[]}}catch(e){return console.error("Error fetching study tips:",e),this.connectionStatusSubject.next("offline"),{tips:this.getFallbackStudyTips()}}})}clearConversation(){this.conversationHistory=[],this.conversationSubject.next([]),this.addWelcomeMessage()}getConversationHistory(){return[...this.conversationHistory]}exportConversation(){return this.conversationHistory.map(e=>`${e.role.toUpperCase()}: ${e.content}`).join(`

`)}getFallbackSubjects(){return{mathematics:{name:"Mathematics",topics:["Algebra","Calculus","Geometry","Statistics"],icon:"\u{1F522}"},physics:{name:"Physics",topics:["Mechanics","Thermodynamics","Electricity","Waves"],icon:"\u269B\uFE0F"},chemistry:{name:"Chemistry",topics:["Organic Chemistry","Inorganic Chemistry","Physical Chemistry"],icon:"\u{1F9EA}"},biology:{name:"Biology",topics:["Cell Biology","Genetics","Evolution","Ecology"],icon:"\u{1F9EC}"},computer_science:{name:"Computer Science",topics:["Programming","Algorithms","Data Structures","Databases"],icon:"\u{1F4BB}"}}}getFallbackStudyTips(){return[{category:"Time Management",tip:"Use the Pomodoro Technique: Study for 25 minutes, then take a 5-minute break",icon:"\u23F0"},{category:"Active Learning",tip:"Teach concepts to someone else or explain them out loud to reinforce understanding",icon:"\u{1F5E3}\uFE0F"},{category:"Note Taking",tip:"Use the Cornell Note-Taking System to organize and review your notes effectively",icon:"\u{1F4DD}"}]}checkBackendHealth(){return d(this,null,function*(){try{return yield this.http.get("http://localhost:8000/health").toPromise(),!0}catch{return!1}})}static{this.\u0275fac=function(r){return new(r||t)(E(B))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Z(t,p){if(t&1&&(i(0,"div",20)(1,"div",21),a(2),o(),i(3,"div",22),C(4,"p",23),i(5,"small",24),a(6),o()()()),t&2){let e=p.$implicit,r=v();_("user-message",e.role==="user")("ai-message",e.role==="assistant"),s(2),T(" ",e.role==="user"?"\u{1F464}":"\u{1F916}"," "),s(2),l("innerHTML",r.formatMessage(e.content),A),s(2),g(r.formatTime(e.timestamp))}}function ee(t,p){t&1&&(i(0,"div",25)(1,"div",21),a(2,"\u{1F916}"),o(),i(3,"div",22)(4,"div",26),C(5,"span")(6,"span")(7,"span"),o()()())}function te(t,p){if(t&1&&(i(0,"option",27),a(1),o()),t&2){let e=p.$implicit,r=v();l("value",e.key),s(),T(" ",r.getSubjectDisplay(e.value)," ")}}function ne(t,p){if(t&1){let e=O();i(0,"div",28),M("click",function(){let n=h(e).$implicit,c=v();return b(c.selectSubjectExample(n.key))}),i(1,"span",29),a(2),o(),i(3,"h4"),a(4),o(),i(5,"p"),a(6),o()()}if(t&2){let e=p.$implicit,r=v();s(2),g(r.getSubjectIcon(e.value)),s(2),g(r.getSubjectName(e.value)),s(2),g(r.getSubjectTopics(e.value))}}function ie(t,p){if(t&1&&(i(0,"div",32)(1,"span",33),a(2),o(),i(3,"div")(4,"strong"),a(5),o(),i(6,"p"),a(7),o()()()),t&2){let e=p.$implicit;s(2),g(e.icon),s(3),g(e.category),s(2),g(e.tip)}}function oe(t,p){if(t&1&&(i(0,"div",30)(1,"h3"),a(2,"\u{1F4A1} Study Tips"),o(),y(3,ie,8,3,"div",31),o()),t&2){let e=v();s(3),l("ngForOf",e.studyTips.slice(0,3))}}var de=(()=>{class t{constructor(e){this.aiTutorService=e,this.conversation=[],this.currentMessage="",this.isTyping=!1,this.connectionStatus="online",this.selectedSubject="",this.availableSubjects={},this.studyTips=[],this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.aiTutorService.conversation$.subscribe(e=>{this.conversation=e,this.scrollToBottom()})),this.subscriptions.push(this.aiTutorService.isTyping$.subscribe(e=>{this.isTyping=e,e&&setTimeout(()=>this.scrollToBottom(),100)})),this.subscriptions.push(this.aiTutorService.connectionStatus$.subscribe(e=>{this.connectionStatus=e})),this.loadSubjects(),this.loadStudyTips()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}sendMessage(){return d(this,null,function*(){if(!this.currentMessage.trim()||this.isTyping)return;let e=this.currentMessage.trim();this.currentMessage="";try{yield this.aiTutorService.sendMessage(e,this.selectedSubject||void 0)}catch(r){console.error("Error sending message:",r)}})}loadSubjects(){return d(this,null,function*(){try{let e=yield this.aiTutorService.getAvailableSubjects();this.availableSubjects=e.subjects}catch(e){console.error("Error loading subjects:",e)}})}loadStudyTips(){return d(this,null,function*(){try{let e=yield this.aiTutorService.getStudyTips();this.studyTips=e.tips}catch(e){console.error("Error loading study tips:",e)}})}selectSubjectExample(e){this.selectedSubject=e;let r={mathematics:"Can you help me understand quadratic equations?",physics:"Explain how photosynthesis works at the molecular level.",chemistry:"What is the difference between ionic and covalent bonds?",biology:"How does DNA replication work?",computer_science:"Explain object-oriented programming concepts.",english:"Help me analyze themes in Shakespeare's Hamlet.",history:"What were the main causes of World War I?",geography:"Explain the water cycle and its importance."};this.currentMessage=r[e]||`Tell me about ${e}`}formatMessage(e){return e.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>")}formatTime(e){return e?new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):""}get featuredSubjects(){return Object.entries(this.availableSubjects).slice(0,4).map(([r,n])=>({key:r,value:n}))}getSubjectDisplay(e){return`${e.icon||"\u{1F4DA}"} ${e.name||"Subject"}`}getSubjectIcon(e){return e.icon||"\u{1F4DA}"}getSubjectName(e){return e.name||"Subject"}getSubjectTopics(e){return e.topics&&Array.isArray(e.topics)?e.topics.slice(0,2).join(", "):"Various topics"}scrollToBottom(){setTimeout(()=>{let e=document.querySelector(".chat-messages");e&&(e.scrollTop=e.scrollHeight)},100)}static{this.\u0275fac=function(r){return new(r||t)(D(Q))}}static{this.\u0275cmp=I({type:t,selectors:[["app-ai-tutor"]],standalone:!0,features:[H],decls:30,vars:16,consts:[["messagesContainer",""],[1,"ai-tutor-container"],[1,"ai-tutor-header"],[1,"connection-status"],[1,"status-indicator"],[1,"ai-tutor-content"],[1,"chat-container"],[1,"chat-messages"],["class","message",3,"user-message","ai-message",4,"ngFor","ngForOf"],["class","message ai-message typing",4,"ngIf"],[1,"chat-input-container"],["type","text","placeholder","Ask me anything about your studies...",1,"chat-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"subject-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"send-button",3,"click","disabled"],[1,"ai-features"],[1,"feature-grid"],["class","feature-card",3,"click",4,"ngFor","ngForOf"],["class","study-tips",4,"ngIf"],[1,"message"],[1,"message-avatar"],[1,"message-content"],[3,"innerHTML"],[1,"message-time"],[1,"message","ai-message","typing"],[1,"typing-indicator"],[3,"value"],[1,"feature-card",3,"click"],[1,"feature-icon"],[1,"study-tips"],["class","tip-card",4,"ngFor","ngForOf"],[1,"tip-card"],[1,"tip-icon"]],template:function(r,n){if(r&1){let c=O();i(0,"div",1)(1,"div",2)(2,"h1"),a(3,"\u{1F916} LearnMate AI Tutor"),o(),i(4,"p"),a(5,"Get personalized help and guidance from your AI learning assistant"),o(),i(6,"div",3),C(7,"span",4),a(8),o()(),i(9,"div",5)(10,"div",6)(11,"div",7,0),y(13,Z,7,7,"div",8)(14,ee,8,0,"div",9),o(),i(15,"div",10)(16,"input",11),w("ngModelChange",function(u){return h(c),j(n.currentMessage,u)||(n.currentMessage=u),b(u)}),M("keyup.enter",function(){return h(c),b(n.sendMessage())}),o(),i(17,"select",12),w("ngModelChange",function(u){return h(c),j(n.selectedSubject,u)||(n.selectedSubject=u),b(u)}),i(18,"option",13),a(19,"Select Subject"),o(),y(20,te,2,2,"option",14),F(21,"keyvalue"),o(),i(22,"button",15),M("click",function(){return h(c),b(n.sendMessage())}),a(23," Send "),o()()(),i(24,"div",16)(25,"h3"),a(26,"What I can help you with:"),o(),i(27,"div",17),y(28,ne,7,3,"div",18),o(),y(29,oe,4,1,"div",19),o()()()}r&2&&(s(6),_("offline",n.connectionStatus==="offline"),s(),_("offline",n.connectionStatus==="offline"),s(),T(" ",n.connectionStatus==="online"?"Connected":"Offline Mode"," "),s(5),l("ngForOf",n.conversation),s(),l("ngIf",n.isTyping),s(2),P("ngModel",n.currentMessage),l("disabled",n.isTyping),s(),P("ngModel",n.selectedSubject),s(3),l("ngForOf",$(21,14,n.availableSubjects)),s(2),l("disabled",!n.currentMessage.trim()||n.isTyping),s(6),l("ngForOf",n.featuredSubjects),s(),l("ngIf",n.studyTips.length>0))},dependencies:[N,V,W,z,J,G,K,L,q,U,Y],styles:[".ai-tutor-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.ai-tutor-header[_ngcontent-%COMP%]{text-align:center;color:#fff;margin-bottom:30px}.connection-status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px;font-size:.9rem;opacity:.9}.status-indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background-color:#4ade80;animation:_ngcontent-%COMP%_pulse 2s infinite}.status-indicator.offline[_ngcontent-%COMP%]{background-color:#f87171}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.ai-tutor-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px}.ai-tutor-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:2fr 1fr;gap:30px}.chat-container[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;padding:20px;border:1px solid rgba(255,255,255,.2);display:flex;flex-direction:column;height:600px}.chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;margin-bottom:20px}.message[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:20px}.message-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0}.message-content[_ngcontent-%COMP%]{background:#ffffff1a;padding:15px 20px;border-radius:15px;color:#fff;flex:1}.chat-input-container[_ngcontent-%COMP%]{display:flex;gap:10px}.chat-input[_ngcontent-%COMP%]{flex:1;padding:15px 20px;border:none;border-radius:25px;background:#ffffff1a;color:#fff;font-size:1rem;outline:none}.chat-input[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}.send-button[_ngcontent-%COMP%]{padding:15px 25px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:25px;cursor:pointer;font-weight:600;transition:all .3s ease}.send-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #0000004d}.ai-features[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;padding:25px;border:1px solid rgba(255,255,255,.2)}.ai-features[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px;font-size:1.3rem}.feature-grid[_ngcontent-%COMP%]{display:grid;gap:15px}.feature-card[_ngcontent-%COMP%]{background:#ffffff1a;padding:20px;border-radius:15px;text-align:center;transition:all .3s ease}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);background:#ffffff26}.feature-icon[_ngcontent-%COMP%]{font-size:2rem;display:block;margin-bottom:10px}.feature-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-bottom:8px;font-size:1.1rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;font-size:.9rem;margin:0}@media (max-width: 768px){.ai-tutor-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.chat-container[_ngcontent-%COMP%]{height:400px}.typing-indicator[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background-color:#6366f1;animation:typing 1.4s infinite}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes typing{0%,60%,to{transform:translateY(0)}30%{transform:translateY(-10px)}}.subject-select[_ngcontent-%COMP%]{padding:10px;border:none;border-radius:8px;background:#ffffff1a;color:#fff;min-width:120px}.subject-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#1f2937;color:#fff}.message-time[_ngcontent-%COMP%]{color:#fff9;font-size:.75rem;margin-top:5px;display:block}.user-message[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#0009}.study-tips[_ngcontent-%COMP%]{margin-top:20px}.tip-card[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:flex-start;background:#ffffff1a;padding:15px;border-radius:10px;margin-bottom:10px}.tip-icon[_ngcontent-%COMP%]{font-size:1.2rem;flex-shrink:0}.tip-card[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#fff}.tip-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;opacity:.9}.feature-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s ease}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}}"]})}}return t})();export{de as AiTutorComponent};
